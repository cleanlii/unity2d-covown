## 前言

#### 写在前面

- 本项目为新手团队项目，仅70%左右代码来自个人贡献。

- 本文档是对策划案中程序概要手册的部分摘录，仅作说明记录作用。

#### 系统环境

- Unity版本：2021.3.6f1c1
- 代码管理：Coding & Git
- 代码工具：VS Code

![1](https://img-blog.csdnimg.cn/a0607a265d4247d38dffd95af2e61202.png)

## 程序框架

#### 项目代码总览

##### 编程语言

本项目编程语言全程使用C#。
C#主要负责Unity相关部分编程。包括Unity的场景管理、UI管理、事件驱动、游戏运行数据等等。

##### 主要类说明

```bash
GameManager # 游戏管理器，驱动游戏和物理引擎，封装包括成就在内的事件

AudioManager # 音频管理器，统一封装及调用音乐和音效功能

MainMenuManager # 集成UGUI的菜单管理器，统一管理游戏内UI并衍生各式菜单及跳转界面

PlayerController # 集成角色控制与相关动画、各类道具交互逻辑等

PlayerHealth # 控制角色生命值及关联事件

ClickEvent # 对UGUI原有的Button对象功能重写及拓展，增加了长按和按下释放的事件以适配手机游戏的触控需求

AntibodyMove/Shot # 集成游戏内部分特殊关卡的交互与战斗逻辑

TimeController # 时间控制器，用于子弹时间及道具加速效果的实现

BgController/CamController # 控制游戏内背景流动及摄像机运动

```

##### 文件夹一览

Assets目录下为项目Unity工程文件，以下为/Assets目录下的结构：

```bash
Animation # 保存动画文件

Audio # 保存音频文件

Essentials # 保存编辑器脚本、字体库、材质文件

Prefab # 保存场景、道具、UI、运行模组等预制件

Res # 保存各种美术素材

Scenes # 保存场景文件

Script # 保存脚本文件

TextMesh Pro # 必要的Unity组件

Video # 保存过场动画等视频文件
```

#### 场景流程说明

##### 代码入口

启动游戏将自动切换到Assets/Scene/Menu.unity场景。主菜单下核心模组将自动挂载。

##### UI组织形式

本项目目前没有做严格的代码逻辑与UI分离，也没有做诸如MVC框架之类，而是使用最基础的Unity Component的代码组织模式。通过MainMenuManager统一来管理所有的UI面板。

主UI部分基于Unity原生的UGUI制作，构建菜单管理器为蓝本，从主菜单场景衍生出各类子菜单、子场景；HUD部分亦使用经典Canvas组件设计，包含计数、量条、弹窗等基础功能。

##### 关卡跳转

本项目基于Button交互和碰撞检测实现菜单以及线性游戏过程中的场景跳转。

##### 数据统计

本项目使用GameManager作为游戏进程管理器，统一记录游戏内数据及管理成就、画廊系统。

![2](https://img-blog.csdnimg.cn/b9e68a873d2e42de95fb28773013c893.png)

#### 资源管理说明

##### 预制件

基于核心玩法特点，本项目在多关卡并行开发中大量使用Prefab预制件，包括UI、道具、场景素材等。

![3](https://img-blog.csdnimg.cn/81d433aec49345ba898109ae46111e09.png)

##### 场景资源调用

本项目场景交互逻辑基于简单的2D碰撞检测制作，在代码优化和场景制作上欠缺经验。由于美术场景素材难以切分，关卡搭建在素材复用度、场景分层及丰富程度上略显不足。多边形碰撞体、诸如Update函数的Unity API泛用也一度带来场景卡顿问题。

##### 音频控制器

本项目使用集成的AudioManager统一管理游戏内所有音效及音乐（过场动画除外）的播放调用，包括开始、终止、消音等功能。

![3](https://img-blog.csdnimg.cn/0e6e4ff65c7c41ae92a0d88030b72673.png)

## 总结

- 游戏开发本质上是一个多工种的深度合作项目，想要完全凭借独狼思维出彩是不可取的。本次比赛最深刻的经验则是来自团队合作方面：项目管理的重要性，动画对于整个游戏体验的重要性，视听风格统一的重要性等等。
- 选择COVID题材是想给自己一些挑战，和其他诸如听障人士复健的题材一样，确实也证明了这一领域的挑战之处——即对负能量题材的敏感环境和平衡把握，以及想要用“具体的某款游戏”去达到某种教育意义是非常困难的一件事情。后者牵涉到开发成本，目标受众，以及最重要的一点，现时代电子游戏的教育意义都是建立在良好的体验之上——如果体验差劲，那么再巧妙构思的教育机制也毫无意义。换而言之，想要用游戏述说某些事情，首先得让你的游戏漂亮起来。
- Coding方面，几乎是对前面U2D一些编程技巧的复用，但是在某些方向上应用得更深，“成就系统”即是由这些零碎知识相互拼合而成的产物，最后的实际效果还算不错。
- 一些细节上的教训诸如勿忘锚点，专注“一个”核心玩法等等经验或许会对日后的Game Jam效率提供很大的帮助。
